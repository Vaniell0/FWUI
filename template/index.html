<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    {{ meta_tags }}
    <title>{{ title }}</title>
    {{ css_links }}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    {{ navigation }}
    <div class="container">
        {{ header }}
        {{ about }}
        {{ projects }}
        
        <!-- Разделенные секции -->
        <div id="contact" class="contact text-black">
            Связаться со мной
        </div>
        
        {{ contact_form }}
        {{ contacts }}
    </div>
    {{ footer }}
    
    {{ js_scripts }}
    <script>
        // Плавная прокрутка
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                const href = this.getAttribute('href');
                if (href === '#' || href === '#!') return;
                
                e.preventDefault();
                const target = document.querySelector(href);
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        // Обработка формы
        const contactForm = document.getElementById('contact-form');
        if (contactForm) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const message = document.getElementById('message').value;
                
                fetch('/api/contact', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ name, email, message })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        contactForm.reset();
                        const successDiv = document.getElementById('success-message');
                        successDiv.textContent = data.message;
                        successDiv.style.display = 'block';
                        successDiv.style.color = '#4CAF50';
                        
                        setTimeout(() => {
                            successDiv.style.display = 'none';
                        }, 5000);
                    }
                })
                .catch(error => {
                    console.error('Ошибка:', error);
                });
            });
        }
        
        // Анимация появления элементов
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, { threshold: 0.1 });
        
        // Наблюдаем за секциями
        document.querySelectorAll('section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(20px)';
            section.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            observer.observe(section);
        });
    </script>
</body>
</html>